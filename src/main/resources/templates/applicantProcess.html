<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Applicant Process</title>
	<div th:insert="../components/nav :: tags"></div>
</head>
<body>
	<!-- message start -->
		<p class="errornoti" th:text="${msg}"></p>
		<p class="errornoti" th:text="${error}"></p>
	<!-- message end -->

	<div th:insert="../components/nav :: navBar"></div>
	<div th:insert="../components/nav :: sideNav"></div>
	<!-- navbar start -->
	<div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${all}}">All</a>
		</div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${ct}}">Code Test</a>
		</div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${ii}}">Intro Interview</a>
		</div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${si}}">Second Interview</a>
		</div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${jo}}">Job offer</a>
		</div>
		<div>
			<a th:href="@{'/applicantProcess/' + ${h}}">Hired</a>
		</div>
		
	</div>
	<!-- navbar end -->

	<!-- search form start  -->
	<div>
		<form th:action="@{'/applicantPro/1/' + ${keyword}}">
			<input type="hidden" name="sortField" th:value="${sortField}" />
			<input type="hidden" name="sortDir" th:value="${sortDir}" />
			<input type="text" name="searchKey" onfocus="this.value=''" th:value="${searchKey}" required/>
			<button type="submit">
				<ion-icon name="search-outline"></ion-icon>
			</button>
		</form>
	</div>
	<!-- search form end  -->
	
	<!-- show applicant result start -->
	<div>
		<table>
			<thead>
				<tr>
					<th>ID</th>
					<th>Name</th>
					<th>Email</th>
					<th>Mobile</th>
					<th>Address</th>
					<th>Link</th>
					<th>Current State</th>
					<th>Status</th>
					<th>Job Post Name</th>
					<th>Applied Position</th>
					<th>Applied Date</th>
					<th>Comment</th>
					<th>CV</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody th:each="data : ${applicants} ">
				<tr>
					<td th:text="${data.applicantId}"></td>
					<td th:text="${data.applicantName}"></td>
					<td th:text="${data.applicantEmail}"></td>
					<td th:text="${data.applicantMobile}"></td>
					<td th:text="${data.address}"></td>
					<td th:text="${data.link}"></td>
					<td th:text="${data.currentState}"></td>
					<td th:text="${data.applicantStatus}"></td>
					<td th:text="${data.jobPost.postName}"></td>
					<td th:text="${data.jobPosition.positionName}"></td>
					<td th:text="${data.applyTime}"></td>
					<td th:text="${data.comment}"></td>
					<td><a th:href="@{'/viewFile/'+${data.applicantId}}">View</a>
					<td th:if="${data.currentState != 'Pass' and data.currentState != 'Fail'}"><a th:href="@{/nextProcess(id=${data.applicantId})}">Next</a></td>
				</tr>
			</tbody>
		</table>
	</div>
	<!-- show applicant result end -->
	<!-- paging start -->
	<div>
		Total Applicants: [[${totalApplicants}]] - Page [[${currentPage}]] of [[${totalPages}]]
		&nbsp; - &nbsp;
		
		<a th:if="${currentPage > 1}" th:href="@{'/applicantPro/1/' + ${keyword} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchKey=' + ${searchKey}}">First</a>
		<span th:unless="${currentPage > 1}">First</span>
		
		<a th:if="${currentPage > 1}" th:href="@{'/applicantPro/' + ${currentPage - 1} + '/' + ${keyword} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchKey=' + ${searchKey}}">Previous</a>
		<span th:unless="${currentPage > 1}">Previous</span>
		
		<span th:each="i: ${#numbers.sequence(1, totalPages)}">
			<a th:if="${i != currentPage}" th:href="@{'/applicantPro/' + ${i} + '/' + ${keyword} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchKey=' + ${searchKey}}">[[${i}]]</a> 
			<span th:unless="${i != currentPage}">[[${i}]]</span>
			&nbsp;&nbsp;
		</span>
		
		<a th:if="${currentPage < totalPages}" th:href="@{'/applicantPro/' + ${currentPage + 1} + '/' + ${keyword} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchKey=' + ${searchKey}}">Next</a>
		<span th:unless="${currentPage < totalPages}">Next</span>
		
		<a th:if="${currentPage < totalPages}" th:href="@{'/applicantPro/' + ${totalPages} + '/' + ${keyword} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&searchKey=' + ${searchKey}}">Last</a>
		<span th:unless="${currentPage < totalPages}">Last</span>
	</div>
	<!-- paging end -->
</body>
</html>